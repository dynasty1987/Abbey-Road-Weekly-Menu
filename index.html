<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Abbey Road Weekly Menu</title>
</head>
<body>
  <div id="menu"></div>

  <script>
    async function loadMenu() {
      const response = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vS1oAuoPPK2B3bp9AYcnJsiPnhUhaKYnXKIGx81PLXQDM3NcTX0DftPmbF3tJxESiav5MN-CAABuXEs/pub?output=csv');
      const csvText = await response.text();

      const rows = csvText.split('\n').map(row => row.split(','));

      const headers = rows[0];
      const data = rows.slice(1).map(row => {
        const obj = {};
        row.forEach((cell, i) => {
          obj[headers[i]] = cell;
        });
        return obj;
      });

      const menuContainer = document.getElementById('menu');
      const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];

      days.forEach(day => {
        const dayMenu = data.filter(item => item.Day === day);

        if (dayMenu.length > 0) {
          const dayBox = document.createElement('div');
          dayBox.style.border = '1px solid #ccc';
          dayBox.style.padding = '10px';
          dayBox.style.marginBottom = '10px';
          dayBox.innerHTML = `<h2>${day}</h2>`;

          dayMenu.forEach(item => {
            if (item["Hot Dishes"]) {
              dayBox.innerHTML += `<p><strong>Hot:</strong> ${item["Hot Dishes"]} (${item["Hot Kcal"]}) - ${item["Hot Dish Price"]}</p>`;
            }
            if (item["Soup"]) {
              dayBox.innerHTML += `<p><strong>Soup:</strong> ${item["Soup"]} (${item["Soup Kcal"]}) - ${item["Soup Price"]}</p>`;
            }
            if (item["Deli"]) {
              dayBox.innerHTML += `<p><strong>Deli:</strong> ${item["Deli"]} (${item["Deli Kcal"]})</p>`;
            }
            if (item["Composite Salads"]) {
              dayBox.innerHTML += `<p><strong>Salad:</strong> ${item["Composite Salads"]} (${item["Salad Kcal"]})</p>`;
            }
          });

          menuContainer.appendChild(dayBox);
        }
      });
    }

    loadMenu();
  </script>
</body>
</html>
